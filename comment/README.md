一些关于插件的小杂谈，写插件的时候遇到的一些有趣的问题会写一写

## actor_to_style

1. aegisub显示乱码的字符，使用 `unicode.chars()` 遍历到的码点属于负数，依此来判断导入文本是否为UTF-8编码


## clips_printer

1. 当一行字幕使用了`p`标签（绘图指令）时，这行字幕会被整体视为特效区去渲染图形。最显著的特征就是，`karaskel.lua`的`line.text_stripped`返回的文本是空字符串`""`，同时其所有位置信息（除去基础定位点定位）需要手动在绘图代码中抓取。
2. 文本宽度(`line.width`)和高度(`line.height`)不包括边框厚度和阴影距离
3. `aegisub.debug.out()`并不包含终止指令，它只是一个GUI输出窗口，`error()`才包含终止指令，或者组合`aegisub.debug.out(); aegisub.cancel()`




4.  `clip`标签很有趣的一点是，它存在很多bug。比如：

	  1. 当一个`t`标签例存在两个`clip`，它其实不是同步展开的。在`t`结束后显示的其实只有后一个`clip`标签，前面的`clip`标签会被当做`t`的一个中间态去演变。很野蛮。
	  2.  如果两行轴存在时间重叠，且存在`clip`标签。选中一行，如果另一行存在`\t(\clip)`标签，另一行可能消失。

